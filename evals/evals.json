{
  "skill_name": "pattern-language-extract",
  "description": "Extract images, transcribe text, and structure data from scanned pattern books",
  "evals": [
    {
      "id": 1,
      "name": "Pattern 61: Small Public Squares - Single scanned page",
      "prompt": "Extract and structure data from this scanned page of Pattern 61 (Small Public Squares). The user has provided a single JPEG image of a book page containing the pattern text, research section, and a diagram of a small public square. Please: 1) Transcribe all text accurately, 2) Extract any images/diagrams with intelligent linking to the text that describes them, 3) Identify at least 2-3 quantitative rules (like dimensions, ratios), 4) Extract at least 3-4 qualitative features (experiential qualities). Output as JSON.",
      "files": ["061_SmallPublicSquares_sample.jpg"],
      "assertions": [
        "The transcribed_text_with_images field contains accurate OCR text from the page",
        "At least one image is extracted with an [Image: X - description] marker in the text",
        "Image descriptions are specific and related to the pattern (not generic)",
        "At least 2 quantitative rules are extracted with value, unit, and type fields",
        "At least 3 qualitative features are identified with at least one multi-category feature",
        "Each quantitative rule includes source_text showing where it came from",
        "OCR confidence is reported and > 0.80 for clear printed text",
        "Output is valid JSON with all required fields",
        "Execution log shows correct page count and image count"
      ]
    },
    {
      "id": 2,
      "name": "Pattern 76: House for a Small Family - Multi-page extraction",
      "prompt": "Extract and structure data from this multi-page scan of Pattern 76 (House for a Small Family). The pages include problem statement, solution, research section with dimensions and photographs, and cross-references. Please: 1) Transcribe all pages in order, 2) Extract all diagrams and floor plans, 3) Link each image to the text that describes it, 4) Extract all quantitative data (room dimensions, area formulas, window-to-wall ratios), 5) Extract qualitative features describing the family living experience and spatial qualities. Output complete JSON.",
      "files": ["076_HouseForSmallFamily_page1.jpg", "076_HouseForSmallFamily_page2.jpg", "076_HouseForSmallFamily_page3.jpg"],
      "assertions": [
        "All three pages are processed and text is concatenated in order",
        "At least 4-5 images are extracted from the multi-page set",
        "Image linking shows semantic understanding (images linked to relevant text, not random)",
        "At least 5 quantitative rules extracted including dimensions and area formulas",
        "At least 6 qualitative features extracted covering multiple categories (Spatial, Social, Atmospheric, etc.)",
        "Quantitative rules distinguish between Range, Threshold, Formula, and other types correctly",
        "Qualitative features include the experiential qualities that make family living work (not just physical description)",
        "High confidence score for quantitative extractions (printed text is clear)",
        "Image descriptions distinguish between different types (floor plan vs. photo vs. diagram)",
        "Execution log correctly reports 3 pages processed"
      ]
    },
    {
      "id": 3,
      "name": "Data quality and accuracy - Verify no fabrication",
      "prompt": "Review the extraction output from Pattern 61. The user will verify: 1) OCR text matches what's actually in the source image, 2) Extracted quantitative rules are real numbers from the text (not fabricated), 3) Image linkages correctly match text passages (not mismatched), 4) Qualitative features are supported by actual quotes or paraphrases from the text. This is a quality assurance check to ensure the skill does not hallucinate or fabricate data.",
      "files": [],
      "assertions": [
        "No quantitative values are fabricated or hallucinatory",
        "All quantitative rules have source_text that actually contains the stated value",
        "Image linking context matches the image content (e.g., a floor plan is linked to text about room layout)",
        "Qualitative features are grounded in actual text, not invented qualities",
        "OCR errors are minimal and flagged with lower confidence if present",
        "No text passages are invented or paraphrased incorrectly",
        "The skill accurately reflects the book content without embellishment"
      ]
    }
  ]
}
